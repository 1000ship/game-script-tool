(this["webpackJsonpgame-script-tool"]=this["webpackJsonpgame-script-tool"]||[]).push([[0],{22:function(e,n,t){e.exports=t(33)},27:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(11),o=t.n(r),l=(t(27),t(6)),i=t(2),u=t(3),d=t(5),m=t(4),s=t(1),p=function(e){try{!function(e,n,t){var a=new Blob([e],{type:t});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,n);else{var c=document.createElement("a"),r=URL.createObjectURL(a);c.href=r,c.download=n,document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(r)}),0)}}(JSON.stringify(e),"script_".concat(parseInt(1e3*Math.random())),"txt")}catch(n){alert("\uc800\uc7a5\ud558\ub294\ub370 \ubb38\uc81c\uac00 \uc0dd\uacbc\uc5b4\uc694")}},f=function(e){try{var n=document.createElement("input");n.type="file",n.accept="text/plain,\xa0text/html,\xa0.jsp",n.click(),n.onchange=function(n){!function(n){var t=new FileReader;t.readAsText(n,"UTF-8"),t.onload=function(){e(JSON.parse(t.result))}}(n.target.files[0])}}catch(t){alert("\ubd88\ub7ec\uc624\ub294\ub370 \ubb38\uc81c\uac00 \uc0dd\uacbc\uc5b4\uc694")}};var g=Object(d.b)({key:"blockListAtom",default:function(){var e;try{null===(e=JSON.parse(localStorage.getItem("me.1000ship.game-script-tool")))&&(e=[])}catch(n){e=[]}return e}()}),b=Object(d.b)({key:"appStateAtom",default:{isSceneFormOpened:!1,modifySceneId:null}}),h=Object(d.c)({key:"blockListSelector",get:function(e){var n=e.get;return n(g)},set:function(e,n){var t=e.set;!function(e){try{localStorage.setItem("me.1000ship.game-script-tool",JSON.stringify(e))}catch(n){alert("\uc790\ub3d9 \uc800\uc7a5 \uc911 \ubb38\uc81c \ubc1c\uc0dd")}}(n),t(g,n)}});function v(){var e=Object(u.a)(["\n  padding: 5px 5px;\n"]);return v=function(){return e},e}function E(){var e=Object(u.a)(["\n  position: fixed;\n  right: 5px;\n  bottom: 5px;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n"]);return E=function(){return e},e}var O=m.a.div(E()),y=m.a.button(v()),x=function(){var e=Object(d.f)(b),n=Object(d.d)(h),t=Object(i.a)(n,2),a=t[0],r=t[1],o=Object(d.f)(g);return c.a.createElement(O,null,c.a.createElement(y,{onClick:function(e){window.confirm("\uc815\ub9d0 \ubaa8\ub4e0 Scene\uc744 \uc0ad\uc81c\ud560\uae4c\uc694??")&&(o([]),window.alert("\uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4. \uc6d0\uce58\uc54a\uc558\ub2e4\uba74 \uc9c0\uae08 \ub2f9\uc7a5 \uc0c8\ub85c\uace0\uce68\uc744 \ub20c\ub7ec\uc8fc\uc138\uc694."))}},"Clear Script"),c.a.createElement(y,{onClick:function(n){e((function(e){return Object(s.a)(Object(s.a)({},e),{},{isSceneFormOpened:!e.isSceneFormOpened,modifySceneId:null})}))}},"Add Scene Block"),c.a.createElement(y,{onClick:function(e){return f((function(e){return r(e)}))}},"Import Script"),c.a.createElement(y,{onClick:function(e){return p(a)}},"Export Script"))},k=t(9),j={sceneId:"",characterName:"",sceneScript:"",characterImage:"",backgroundImage:"",sceneSound:"",backgroundSound:"",nextSceneId:"",options:[{answer:"",reaction:"",nextId:""}],sceneType:"meet"};function I(){var e=Object(u.a)(["\n  width: 100%;\n  height: 50px;\n  display: block;\n"]);return I=function(){return e},e}function S(){var e=Object(u.a)([""]);return S=function(){return e},e}function w(){var e=Object(u.a)([""]);return w=function(){return e},e}function C(){var e=Object(u.a)(["\n  padding: 3px 0px;\n"]);return C=function(){return e},e}function B(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return B=function(){return e},e}function F(){var e=Object(u.a)(["\n  padding: 10px 0px;\n  border-bottom: 1px solid gray;\n  z-index: 1;\n"]);return F=function(){return e},e}var T=m.a.div(F()),N=m.a.div(B()),L=m.a.div(C()),M=m.a.label(w()),D=m.a.input(S()),J=m.a.textarea(I()),R=function(e){var n=e.isModifyMode,t=e.formData,a=t.sceneId,r=t.characterName,o=t.sceneScript,l=t.characterImage,i=t.backgroundImage,u=t.sceneSound,d=t.backgroundSound,m=t.nextSceneId,s=t.options,p=t.sceneType,f=e.onInputChange,g=e.onOptionAddClick,b=e.onOptionRemoveClick,h=e.onNewBlockClick,v=e.onModifyBlockClick;return(c.a.createElement(T,null,c.a.createElement(L,null,c.a.createElement("span",null,"Scene Type : "),c.a.createElement(D,{name:"sceneType",id:"scene-type-meet","data-value":"meet",type:"radio",checked:"meet"===p,onChange:f}),c.a.createElement(M,{htmlFor:"scene-type-meet"},"\ub9cc\ub0a8"),c.a.createElement(D,{name:"sceneType",id:"scene-type-text","data-value":"text",type:"radio",checked:"text"===p,onChange:f}),c.a.createElement(M,{htmlFor:"scene-type-text"},"\ubb38\uc790"),c.a.createElement(D,{name:"sceneType",id:"scene-type-ending","data-value":"ending",type:"radio",checked:"ending"===p,onChange:f}),c.a.createElement(M,{htmlFor:"scene-type-ending"},"\uc5d4\ub529")),c.a.createElement(L,null,c.a.createElement(M,{htmlFor:"scene-id"},"Scene ID : "),c.a.createElement(D,{name:"sceneId",id:"scene-id",type:"text",placeholder:"#3-1",value:a,onChange:f,disabled:n}),n&&c.a.createElement("small",null," \uc218\uc815 \uc911")),"ending"!==p&&c.a.createElement(L,null,c.a.createElement(M,{htmlFor:"character-name"},"Character Name : "),c.a.createElement(D,{name:"characterName",value:r,onChange:f,id:"character-name",type:"text",placeholder:"John Mayer"})),c.a.createElement(L,null,c.a.createElement(M,{htmlFor:"scene-script"},"Scene Script : "),c.a.createElement(J,{name:"sceneScript",value:o,onChange:f,id:"scene-script",placeholder:"ending"!==p?"Hello, the weather is sunny. Shall we go picnic?":"Game Over, She didn't reply to your message forever"})),"ending"!==p&&c.a.createElement(N,null,c.a.createElement(L,null,c.a.createElement(M,{htmlFor:"character-image"},"Character Image : "),c.a.createElement(D,{name:"characterImage",value:l,onChange:f,id:"character-image",type:"text",placeholder:"smile.png (\uc120\ud0dd\uc785\ub825)"})),c.a.createElement(L,null,c.a.createElement(M,{htmlFor:"background-image"},"Background Image : "),c.a.createElement(D,{name:"backgroundImage",value:i,onChange:f,id:"background-image",type:"text",placeholder:"park.png (\uc120\ud0dd\uc785\ub825)"})),c.a.createElement(L,null,c.a.createElement(M,{htmlFor:"scene-sound"},"Scene Sound : "),c.a.createElement(D,{name:"sceneSound",value:u,onChange:f,id:"scene-sound",type:"text",placeholder:"laugh.mp3 (\uc120\ud0dd\uc785\ub825)"})),c.a.createElement(L,null,c.a.createElement(M,{htmlFor:"background-sound"},"Background Sound : "),c.a.createElement(D,{name:"backgroundSound",value:d,onChange:f,id:"background-sound",type:"text",placeholder:"cafe.mp3 (\uc120\ud0dd\uc785\ub825)"}))),"ending"!==p&&c.a.createElement(c.a.Fragment,null,s.length>0?s.map((function(e,n){var t=e.answer,a=e.reaction,r=e.nextId;return(c.a.createElement(L,{key:n,style:{display:"flex"}},c.a.createElement(M,null,n+1,". "),c.a.createElement(D,{style:{flex:1},type:"text",placeholder:"(\ub300\ub2f5) I like too",name:"answer","data-option-index":n,value:t,onChange:f}),c.a.createElement(D,{style:{flex:1},type:"text",placeholder:"(\ubc18\uc751) Let's meet now",name:"reaction","data-option-index":n,value:a,onChange:f}),c.a.createElement(D,{type:"text",placeholder:"#3-".concat(n+2),name:"nextId","data-option-index":n,value:r,onChange:f})))})):c.a.createElement(L,null,c.a.createElement(M,{htmlFor:"next-scene-id"},"Next Scene ID : "),c.a.createElement(D,{name:"nextSceneId",value:m,onChange:f,id:"next-scene-id",type:"text",placeholder:"#4-1"})),c.a.createElement("button",{onClick:g},"\uc120\ud0dd\uc9c0 \ucd94\uac00"),s.length>0&&c.a.createElement("button",{onClick:b},"\uc120\ud0dd\uc9c0 \uc0ad\uc81c"),c.a.createElement("br",null)),c.a.createElement("button",{onClick:n?v:h},n?"\ube14\ub7ed \uc218\uc815":"\ube14\ub7ed \ucd94\uac00")))};var A=function(e){var n=e.createNewBlock,t=e.modifyBlock,r=Object(d.e)(b),o=Object(d.e)(h),l=r.modifySceneId,u=Object(a.useMemo)((function(){return l?o.find((function(e){return e.sceneId===l})):j}),[o,l]);Object(a.useEffect)((function(){g(Object(s.a)({},u))}),[]);var m=Object(a.useState)(u),p=Object(i.a)(m,2),f=p[0],g=p[1];return Object(a.useEffect)((function(){console.log(f)}),[f]),c.a.createElement(R,{isModifyMode:null!==l,formData:f,onInputChange:function(e){var n=e.target,t=n.name,a=n.value,c=n.dataset,r=c.optionIndex,o=c.value;g(void 0!==r?function(e){return e.options[r][t]=a,Object(s.a)({},e)}:Object(s.a)(Object(s.a)({},f),{},Object(k.a)({},t,o||a)))},onOptionAddClick:function(e){g(Object(s.a)(Object(s.a)({},f),{},{options:f.options.concat({answer:"",reaction:"",nextId:""})}))},onOptionRemoveClick:function(e){f.options.length>0&&g((function(e){return Object(s.a)(Object(s.a)({},e),{},{options:e.options.slice(0,e.options.length-1)})}))},onNewBlockClick:function(e){0===f.sceneId.length?alert("Scene ID\ub97c \uc785\ub825\ud558\uc138\uc694."):o.find((function(e){return e.sceneId===f.sceneId}))?alert("\uc911\ubcf5\ub418\ub294 Scene Type\uacfc Scene ID\uac00 \uc788\uc2b5\ub2c8\ub2e4."):n&&(n(Object(s.a)({},f)),g(Object(s.a)(Object(s.a)({},u),{},{options:[{answer:"",reaction:"",nextId:""}]})))},onModifyBlockClick:function(e){return t(Object(s.a)({},f))}})};function U(){var e=Object(u.a)(["\n  font-size: 12px;\n  margin-left: 6px;\n  cursor: pointer;\n  &:hover {\n    font-weight: bolder;\n  }\n"]);return U=function(){return e},e}function z(){var e=Object(u.a)(["\n  margin: 0px;\n  padding: 0px;\n  list-style: none;\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  display: flex;\n"]);return z=function(){return e},e}function W(){var e=Object(u.a)(["\n  background-color: ",";\n  border-radius: 5px;\n  padding: 3px;\n  display: inline-block;\n"]);return W=function(){return e},e}function G(){var e=Object(u.a)(["\n  margin-right: 10px;\n  font-size: 13px;\n"]);return G=function(){return e},e}function H(){var e=Object(u.a)([""]);return H=function(){return e},e}function $(){var e=Object(u.a)([""]);return $=function(){return e},e}function _(){var e=Object(u.a)(["\n  margin-top: 5px;\n  background-color: white;\n  padding: 5px;\n  border-radius: 3px;\n"]);return _=function(){return e},e}function q(){var e=Object(u.a)(["\n  font-style: italic;\n  margin-top: 5px;\n"]);return q=function(){return e},e}function K(){var e=Object(u.a)(["\n  font-weight: 800;\n  cursor: pointer;\n  & small {\n    font-weight: 400;\n    cursor: default;\n    margin-left: 8px;\n  }\n"]);return K=function(){return e},e}function P(){var e=Object(u.a)(["\n  background-color: #efefef;\n  padding: 10px;\n  margin: 5px;\n  position: relative;\n"]);return P=function(){return e},e}function Q(){var e=Object(u.a)(["\n  color: red;\n  font-weight: bolder;\n"]);return Q=function(){return e},e}function V(){var e=Object(u.a)(["\n  color: inherit;\n  text-decoration: none;\n"]);return V=function(){return e},e}var X=m.a.a(V()),Y=Object(m.a)(X)(Q()),Z=m.a.div(P()),ee=m.a.div(K()),ne=m.a.div(q()),te=m.a.div(_()),ae=m.a.ol($()),ce=m.a.li(H()),re=m.a.span(G()),oe=m.a.span(W(),(function(e){return e.color?e.color:"white"})),le=m.a.ul(z()),ie=m.a.li(U()),ue=function(e){var n,t,a,r,o=e.block,l=e.moveBlockBy,i=e.removeBlock,u=e.modifyBlock,d=e.blockList;return c.a.createElement(Z,{id:o.sceneId},c.a.createElement(le,null,c.a.createElement(ie,{onClick:function(e){return l(o.sceneId,-1)}},"\uc704\ub85c"),c.a.createElement(ie,{onClick:function(e){return l(o.sceneId,1)}},"\uc544\ub798\ub85c"),c.a.createElement(ie,{onClick:function(){i(o.sceneId)}},"\uc0ad\uc81c"),c.a.createElement(ie,{onClick:function(){u(o.sceneId)}},"\uc218\uc815")),c.a.createElement(X,{href:"#".concat(o.sceneId)},c.a.createElement(ee,null,o.sceneId," ",c.a.createElement("small",null,"ending"===o.sceneType?"\ud83d\udd1a\uc5d4\ub529":"text"===o.sceneType?"\ud83d\udcac\ucc44\ud305":"\ud83d\udc65\ub9cc\ub0a8"))),"ending"!==o.sceneType&&c.a.createElement(ne,null,o.characterName),c.a.createElement(te,null,o.sceneScript),"ending"!==o.sceneType&&(null===(n=o.characterImage)||void 0===n?void 0:n.length)>0&&c.a.createElement(re,{"aria-label":"man"},"\ud83d\udd7a\ud83c\udffb\uce90\ub9ad\ud130\uc774\ubbf8\uc9c0 ",c.a.createElement("b",null,'"',o.characterImage,'"')),"ending"!==o.sceneType&&(null===(t=o.backgroundImage)||void 0===t?void 0:t.length)>0&&c.a.createElement(re,{"aria-label":"landscape"},"\ud83c\udfde\ubc30\uacbd\uc774\ubbf8\uc9c0 ",c.a.createElement("b",null,'"',o.backgroundImage,'"')),"ending"!==o.sceneType&&(null===(a=o.sceneSound)||void 0===a?void 0:a.length)>0&&c.a.createElement(re,{"aria-label":"speaker"},"\ud83d\udd08\ub300\uc0ac ",c.a.createElement("b",null,'"',o.sceneSound,'"')),"ending"!==o.sceneType&&(null===(r=o.backgroundSound)||void 0===r?void 0:r.length)>0&&c.a.createElement(re,{"aria-label":"music"},"\ud83c\udfbc\ubc30\uacbd\uc74c\uc545 ",c.a.createElement("b",null,'"',o.backgroundSound,'"')),"ending"!==o.sceneType&&c.a.createElement(c.a.Fragment,null,0===o.options.length?c.a.createElement("div",null,"Next Scene ID : ",o.nextSceneId):c.a.createElement(ae,null,o.options.map((function(e,n){var t,a=e.answer,r=e.reaction,o=e.nextId;return(c.a.createElement(ce,{key:n},(null===a||void 0===a?void 0:a.length)>0?c.a.createElement(c.a.Fragment,null,c.a.createElement(oe,{color:"lightcyan"},a)," \uc120\ud0dd \uc2dc"):null,(null===a||void 0===a?void 0:a.length)>0?" \u2192 ":null,(null===r||void 0===r?void 0:r.length)>0?c.a.createElement(c.a.Fragment,null,c.a.createElement(oe,{color:"lightyellow"},r)," \ubc18\uc751"):null,(null===r||void 0===r?void 0:r.length)>0?" \u2192 ":null,-1===d.findIndex((function(e){return e.sceneId===o}))?c.a.createElement(Y,{href:"#",onClick:(t="\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 Scene ID \uc785\ub2c8\ub2e4.",function(e){alert(t)})},o):c.a.createElement(X,{href:"#".concat(o)},c.a.createElement("b",null,o))," ","\uc7a5\uba74 \uc774\ub3d9"))})))))};function de(){var e=Object(u.a)(["\n  padding: 5px 0px;\n"]);return de=function(){return e},e}var me=m.a.div(de()),se=function(){var e=Object(d.d)(h),n=Object(i.a)(e,2),t=n[0],a=n[1],r=Object(d.d)(b),o=Object(i.a)(r,2),u=o[0],m=o[1],p=function(e,n){a((function(t){var a=t.findIndex((function(n){return n.sceneId===e})),c=a+n;if(c<0||c>=t.length)return t;var r=[].concat(Object(l.a)(t.slice(0,a)),Object(l.a)(t.slice(a+1)));return[].concat(Object(l.a)(r.slice(0,c)),[t[a]],Object(l.a)(r.slice(c)))}))},f=function(e){window.confirm("\uc0ad\uc81c\ud55c \ud6c4 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&a((function(n){return n.filter((function(n){return n.sceneId!==e}))}))},g=function(e){return m(Object(s.a)(Object(s.a)({},u),{},{isSceneFormOpened:!0,modifySceneId:e}))};return c.a.createElement(me,null,t.map((function(e,n){return c.a.createElement(ue,{key:e.sceneId,block:e,moveBlockBy:p,removeBlock:f,modifyBlock:g,blockList:t})})))};function pe(){var e=Object(u.a)(["\n  overflow-y: auto;\n"]);return pe=function(){return e},e}function fe(){var e=Object(u.a)(["\n  @media (min-width: 800px) {\n    width: 80%;\n  }\n  margin: auto auto;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n"]);return fe=function(){return e},e}var ge=m.a.div(fe()),be=m.a.div(pe());var he=function(){var e=Object(d.d)(h),n=Object(i.a)(e,2),t=n[0],a=n[1],r=Object(d.d)(b),o=Object(i.a)(r,2),u=o[0],m=o[1];return c.a.createElement(ge,null,c.a.createElement(x,null),u.isSceneFormOpened&&c.a.createElement(A,{blockList:t,createNewBlock:function(e){a((function(n){return[].concat(Object(l.a)(n),[e])}))},modifyBlock:function(e){a((function(n){var t=n.findIndex((function(n){return n.sceneId===e.sceneId}));return-1===t?(alert("\uc218\uc815\ud558\uace0\uc790\ud558\ub294 Scene ".concat(e.sceneId,"\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")),n):[].concat(Object(l.a)(n.slice(0,t)),[e],Object(l.a)(n.slice(t+1)))})),m({isSceneFormOpened:!1,modifySceneId:null})}}),c.a.createElement(be,null,c.a.createElement(se,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(d.a,null,c.a.createElement(he,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.e8a23c89.chunk.js.map